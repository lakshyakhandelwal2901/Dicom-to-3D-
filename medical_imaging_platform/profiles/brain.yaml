# Brain Organ Profile
# Segmentation parameters for brain CT analysis
# Separates: skull/skin (shell) + brain tissue

organ: brain
description: "Brain and skull segmentation from CT scans"
category: "neuro"
modality: ["CT"]

# HU (Hounsfield Unit) ranges for different tissue types
tissues:
  shell:
    name: "Skull/Skin"
    hu_min: 120
    hu_max: 3000
    color: [200, 200, 180]  # RGB - bone color
    description: "Outer skull and skin"
    
  brain:
    name: "Brain Tissue"
    hu_min: 0
    hu_max: 150
    color: [180, 140, 100]  # RGB - brown
    description: "Gray matter, white matter, CSF combined"

# Preprocessing
preprocessing:
  target_spacing_mm: 1.0        # Resample to isotropic 1mm voxels
  gaussian_sigma: 0.6           # Denoise before segmentation
  normalize: true               # Normalize HU values

# Morphological operations (shape processing)
morphology:
  closing_radius: 3             # Voxels - connect regions
  dilation_iterations: 2        # Fill gaps
  erosion_iterations: 1         # Clean edges
  fill_holes: true              # Fill internal cavities
  keep_largest_component: true  # Remove floating artifacts

# Mesh processing
mesh:
  algorithm: "marching_cubes"   # Surface extraction method
  laplacian_smoothing_iterations: 20
  laplacian_smoothing_lambda: 0.5
  decimation_target: 0.8        # Keep 80% of faces (20% reduction)
  remove_isolated_vertices: true

# Export settings
export:
  formats: ["stl", "ply"]       # Output formats
  stl_binary: true              # STL as binary (not ASCII)
  include_colors: true          # Include colors in PLY

# Quality assurance
quality:
  min_voxels: 500               # Minimum tissue size to include
  max_holes: 5                  # Warn if >5 holes detected
  manifold_check: true          # Ensure closed mesh
